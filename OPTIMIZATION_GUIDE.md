# é¡¹ç›®ä¼˜åŒ–å®æ–½æŒ‡å— / Project Optimization Implementation Guide

## ç›®çš„ / Purpose

æœ¬æŒ‡å—æ—¨åœ¨å¸®åŠ©å›¢é˜Ÿé€æ­¥å®æ–½é¡¹ç›®æ¶æ„ä¼˜åŒ–ï¼Œç¡®ä¿å¹³æ»‘è¿‡æ¸¡ï¼Œä¸å½±å“ç°æœ‰åŠŸèƒ½ã€‚

This guide helps the team gradually implement project architecture optimizations, ensuring a smooth transition without affecting existing functionality.

---

## å®æ–½é˜¶æ®µ / Implementation Phases

### âœ… ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€è®¾æ–½ï¼ˆå·²å®Œæˆï¼‰/ Phase 1: Infrastructure (Completed)

**æ—¶é—´**: ç¬¬ 1 å¤©
**è´Ÿè´£äºº**: æ¶æ„å¸ˆ
**çŠ¶æ€**: âœ… å·²å®Œæˆ

#### å®Œæˆçš„ä»»åŠ¡ï¼š
- [x] æ·»åŠ ä»£ç è§„èŒƒå·¥å…·ï¼ˆESLint, Prettier, EditorConfigï¼‰
- [x] é…ç½® TypeScript ä¸¥æ ¼æ¨¡å¼
- [x] åˆ›å»ºæ–‡æ¡£ä½“ç³»
- [x] é…ç½® VSCode å¼€å‘ç¯å¢ƒ
- [x] æ·»åŠ  Git hooks
- [x] åˆ›å»º CI/CD å·¥ä½œæµ

#### éªŒæ”¶æ ‡å‡†ï¼š
- æ‰€æœ‰é…ç½®æ–‡ä»¶å·²åˆ›å»ºå¹¶æäº¤
- æ–‡æ¡£å®Œæ•´ä¸”å¯è®¿é—®
- VSCode æ‰©å±•æ¨èåˆ—è¡¨å¯ç”¨

---

### ğŸ”„ ç¬¬äºŒé˜¶æ®µï¼šå›¢é˜ŸåŸ¹è®­å’Œé€‚åº”ï¼ˆè¿›è¡Œä¸­ï¼‰/ Phase 2: Team Training (In Progress)

**æ—¶é—´**: ç¬¬ 2-3 å¤©
**è´Ÿè´£äºº**: æŠ€æœ¯è´Ÿè´£äºº
**çŠ¶æ€**: ğŸ”„ è¿›è¡Œä¸­

#### ä»»åŠ¡æ¸…å•ï¼š
- [ ] ç»„ç»‡å›¢é˜ŸåŸ¹è®­ä¼šè®®
  - [ ] ä»‹ç»æ–°çš„ä»£ç è§„èŒƒ
  - [ ] æ¼”ç¤ºæ–°çš„å¼€å‘å·¥ä½œæµ
  - [ ] è®²è§£ AI è¾…åŠ©ç¼–ç¨‹æœ€ä½³å®è·µ
  
- [ ] æ›´æ–°å›¢é˜Ÿæ–‡æ¡£
  - [ ] åˆ†äº« CONTRIBUTING.md
  - [ ] åˆ†äº« ARCHITECTURE.md
  - [ ] åˆ›å»ºå¿«é€Ÿå‚è€ƒå¡ç‰‡

- [ ] è¯•ç‚¹é¡¹ç›®
  - [ ] é€‰æ‹© 1-2 ä¸ªåŒ…è¿›è¡Œè¯•ç‚¹
  - [ ] åœ¨è¯•ç‚¹åŒ…ä¸Šåº”ç”¨æ–°è§„èŒƒ
  - [ ] æ”¶é›†åé¦ˆå’Œé—®é¢˜

#### éªŒæ”¶æ ‡å‡†ï¼š
- æ‰€æœ‰å›¢é˜Ÿæˆå‘˜äº†è§£æ–°å·¥å…·å’Œæµç¨‹
- è‡³å°‘ 80% å›¢é˜Ÿæˆå‘˜å®‰è£…äº†æ¨èçš„ VSCode æ‰©å±•
- è¯•ç‚¹åŒ…æˆåŠŸåº”ç”¨æ–°è§„èŒƒ

---

### ğŸ“¦ ç¬¬ä¸‰é˜¶æ®µï¼šé€æ­¥è¿ç§»ï¼ˆè®¡åˆ’ä¸­ï¼‰/ Phase 3: Gradual Migration (Planned)

**æ—¶é—´**: ç¬¬ 4-10 å¤©
**è´Ÿè´£äºº**: å„åŒ…è´Ÿè´£äºº
**çŠ¶æ€**: ğŸ“… è®¡åˆ’ä¸­

#### è¿ç§»ç­–ç•¥ï¼š

**ä¼˜å…ˆçº§ 1: æ ¸å¿ƒåŒ…ï¼ˆç¬¬ 4-5 å¤©ï¼‰**
- [ ] @steedos-widgets/amis-object
- [ ] @steedos-widgets/amis-lib
- [ ] @steedos-widgets/steedos-lib

**ä¼˜å…ˆçº§ 2: å¸¸ç”¨åŒ…ï¼ˆç¬¬ 6-7 å¤©ï¼‰**
- [ ] @steedos-widgets/reactflow
- [ ] @steedos-widgets/ag-grid
- [ ] @steedos-widgets/liveblocks

**ä¼˜å…ˆçº§ 3: å…¶ä»–åŒ…ï¼ˆç¬¬ 8-10 å¤©ï¼‰**
- [ ] @steedos-widgets/devextreme
- [ ] @steedos-widgets/fullcalendar
- [ ] @steedos-widgets/ckeditor
- [ ] @steedos-widgets/sortable
- [ ] @steedos-widgets/example

#### æ¯ä¸ªåŒ…çš„è¿ç§»æ­¥éª¤ï¼š

1. **å‡†å¤‡é˜¶æ®µ**
   ```bash
   # åˆ›å»ºè¿ç§»åˆ†æ”¯
   git checkout -b refactor/package-name-strict-types
   
   # å¤‡ä»½å½“å‰çŠ¶æ€
   git tag backup/package-name-$(date +%Y%m%d)
   ```

2. **ä»£ç æ›´æ–°**
   ```bash
   # è¿è¡Œç±»å‹æ£€æŸ¥ï¼ŒæŸ¥çœ‹é—®é¢˜
   cd packages/@steedos-widgets/package-name
   yarn type-check
   
   # é€æ­¥ä¿®å¤ç±»å‹é”™è¯¯
   # 1. ä¿®å¤ç®€å•çš„ç±»å‹é”™è¯¯
   # 2. æ·»åŠ å¿…è¦çš„ç±»å‹å®šä¹‰
   # 3. æ›´æ–°å¯¼å‡ºè¯­å¥
   ```

3. **ä»£ç è´¨é‡**
   ```bash
   # è¿è¡Œ linter
   yarn lint:fix
   
   # æ ¼å¼åŒ–ä»£ç 
   yarn format
   
   # å†æ¬¡ç±»å‹æ£€æŸ¥
   yarn type-check
   ```

4. **æµ‹è¯•**
   ```bash
   # æ„å»ºåŒ…
   yarn build
   
   # åœ¨ Steedos é¡¹ç›®ä¸­æµ‹è¯•
   # ç¡®ä¿åŠŸèƒ½æ­£å¸¸
   ```

5. **æäº¤å’Œå®¡æŸ¥**
   ```bash
   # æäº¤æ›´æ”¹
   git add .
   git commit -m "refactor(package-name): apply strict TypeScript types"
   
   # åˆ›å»º PR
   gh pr create --title "refactor(package-name): apply strict types" --body "..."
   
   # è¯·æ±‚ä»£ç å®¡æŸ¥
   ```

#### éªŒæ”¶æ ‡å‡†ï¼š
- æ‰€æœ‰ç±»å‹é”™è¯¯å·²ä¿®å¤
- æ„å»ºæˆåŠŸ
- é€šè¿‡ä»£ç å®¡æŸ¥
- åŠŸèƒ½æµ‹è¯•é€šè¿‡

---

### ğŸ§ª ç¬¬å››é˜¶æ®µï¼šæµ‹è¯•åŸºç¡€è®¾æ–½ï¼ˆè®¡åˆ’ä¸­ï¼‰/ Phase 4: Testing Infrastructure (Planned)

**æ—¶é—´**: ç¬¬ 11-15 å¤©
**è´Ÿè´£äºº**: QA è´Ÿè´£äºº
**çŠ¶æ€**: ğŸ“… è®¡åˆ’ä¸­

#### ä»»åŠ¡æ¸…å•ï¼š

**Jest é…ç½®ï¼ˆç¬¬ 11-12 å¤©ï¼‰**
- [ ] æ·»åŠ  Jest é…ç½®åˆ°æ ¹ç›®å½•
- [ ] é…ç½® TypeScript + Jest
- [ ] æ·»åŠ æµ‹è¯•å·¥å…·å’Œè¾…åŠ©å‡½æ•°
- [ ] åˆ›å»ºæµ‹è¯•æ¨¡æ¿

**ç¤ºä¾‹æµ‹è¯•ï¼ˆç¬¬ 13 å¤©ï¼‰**
- [ ] ä¸ºæ ¸å¿ƒç»„ä»¶æ·»åŠ å•å…ƒæµ‹è¯•ç¤ºä¾‹
- [ ] æ·»åŠ å·¥å…·å‡½æ•°æµ‹è¯•ç¤ºä¾‹
- [ ] åˆ›å»º React ç»„ä»¶æµ‹è¯•ç¤ºä¾‹

**æµ‹è¯•è¦†ç›–ç‡ï¼ˆç¬¬ 14-15 å¤©ï¼‰**
- [ ] é…ç½®è¦†ç›–ç‡æŠ¥å‘Š
- [ ] è®¾ç½®æœ€ä½è¦†ç›–ç‡ç›®æ ‡ï¼ˆ50%ï¼‰
- [ ] åœ¨ CI ä¸­é›†æˆæµ‹è¯•

#### éªŒæ”¶æ ‡å‡†ï¼š
- Jest é…ç½®æ­£å¸¸å·¥ä½œ
- è‡³å°‘ 3 ä¸ªåŒ…æœ‰ç¤ºä¾‹æµ‹è¯•
- CI ä¸­æµ‹è¯•è‡ªåŠ¨è¿è¡Œ

---

### ğŸš€ ç¬¬äº”é˜¶æ®µï¼šæŒç»­ä¼˜åŒ–ï¼ˆæŒç»­è¿›è¡Œï¼‰/ Phase 5: Continuous Improvement (Ongoing)

**æ—¶é—´**: æŒç»­
**è´Ÿè´£äºº**: å…¨ä½“å›¢é˜Ÿ
**çŠ¶æ€**: ğŸ”„ æŒç»­è¿›è¡Œ

#### å®šæœŸä»»åŠ¡ï¼š

**æ¯å‘¨**
- [ ] å®¡æŸ¥ä¾èµ–æ›´æ–° PRï¼ˆRenovateï¼‰
- [ ] æ£€æŸ¥ CI å¤±è´¥æƒ…å†µ
- [ ] æ›´æ–°æ–‡æ¡£ï¼ˆå¦‚éœ€è¦ï¼‰

**æ¯æœˆ**
- [ ] å®¡æŸ¥ä»£ç è´¨é‡æŒ‡æ ‡
- [ ] è¯„ä¼° AI è¾…åŠ©æ•ˆæœ
- [ ] æ”¶é›†å›¢é˜Ÿåé¦ˆ
- [ ] è¯†åˆ«æ”¹è¿›æœºä¼š

**æ¯å­£åº¦**
- [ ] å…¨é¢æ¶æ„å®¡æŸ¥
- [ ] æ›´æ–°æŠ€æœ¯æ ˆ
- [ ] åŸ¹è®­å’ŒçŸ¥è¯†åˆ†äº«
- [ ] åˆ¶å®šä¸‹å­£åº¦ç›®æ ‡

---

## é£é™©ç®¡ç† / Risk Management

### æ½œåœ¨é£é™© / Potential Risks

1. **ç±»å‹é”™è¯¯ä¿®å¤æ—¶é—´è¶…å‡ºé¢„æœŸ**
   - **ç¼“è§£**: å¯ä»¥æš‚æ—¶ä½¿ç”¨ `@ts-ignore` æ ‡è®°å¤æ‚é—®é¢˜ï¼Œç¨åå¤„ç†
   - **åº”æ€¥æ–¹æ¡ˆ**: å»¶é•¿è¿ç§»æ—¶é—´è¡¨

2. **å›¢é˜ŸæŠµè§¦æ–°å·¥å…·**
   - **ç¼“è§£**: æä¾›å……åˆ†åŸ¹è®­å’Œæ”¯æŒ
   - **åº”æ€¥æ–¹æ¡ˆ**: å…è®¸æ¸è¿›å¼é‡‡ç”¨

3. **æ„å»ºå¤±è´¥**
   - **ç¼“è§£**: åœ¨åŠŸèƒ½åˆ†æ”¯ä¸Šæµ‹è¯•ï¼Œä¸å½±å“ä¸»åˆ†æ”¯
   - **åº”æ€¥æ–¹æ¡ˆ**: å›é€€åˆ°ä¸Šä¸€ä¸ªç¨³å®šç‰ˆæœ¬

4. **æ€§èƒ½ä¸‹é™**
   - **ç¼“è§£**: ç›‘æ§æ„å»ºæ—¶é—´å’ŒåŒ…å¤§å°
   - **åº”æ€¥æ–¹æ¡ˆ**: ä¼˜åŒ–é…ç½®æˆ–æš‚åœæŸäº›ä¼˜åŒ–

### å›æ»šè®¡åˆ’ / Rollback Plan

å¦‚æœé‡åˆ°ä¸¥é‡é—®é¢˜ï¼š

```bash
# 1. æ¢å¤åˆ°å¤‡ä»½æ ‡ç­¾
git checkout backup/package-name-20260112

# 2. åˆ›å»ºç´§æ€¥ä¿®å¤åˆ†æ”¯
git checkout -b hotfix/revert-strict-types

# 3. æäº¤å¹¶éƒ¨ç½²
git push origin hotfix/revert-strict-types

# 4. åˆ†æé—®é¢˜ï¼Œåˆ¶å®šæ–°è®¡åˆ’
```

---

## æˆåŠŸæŒ‡æ ‡ / Success Metrics

### çŸ­æœŸæŒ‡æ ‡ï¼ˆ1-2 å‘¨ï¼‰/ Short-term Metrics (1-2 weeks)

- [ ] æ‰€æœ‰é…ç½®æ–‡ä»¶å·²éƒ¨ç½²
- [ ] è‡³å°‘ 50% çš„åŒ…å·²è¿ç§»åˆ°ä¸¥æ ¼ç±»å‹
- [ ] CI/CD æµæ°´çº¿æ­£å¸¸è¿è¡Œ
- [ ] å›¢é˜Ÿæˆå‘˜åé¦ˆç§¯æ

### ä¸­æœŸæŒ‡æ ‡ï¼ˆ1-2 æœˆï¼‰/ Mid-term Metrics (1-2 months)

- [ ] 100% åŒ…å·²è¿ç§»åˆ°ä¸¥æ ¼ç±»å‹
- [ ] ä»£ç è¦†ç›–ç‡ > 50%
- [ ] ESLint é”™è¯¯æ•°é‡å‡å°‘ 80%
- [ ] æ„å»ºæ—¶é—´æ²¡æœ‰æ˜¾è‘—å¢åŠ 

### é•¿æœŸæŒ‡æ ‡ï¼ˆ3-6 æœˆï¼‰/ Long-term Metrics (3-6 months)

- [ ] å¼€å‘é€Ÿåº¦æå‡ 30%
- [ ] Bug æ•°é‡å‡å°‘ 40%
- [ ] AI è¾…åŠ©å‡†ç¡®ç‡ > 85%
- [ ] ä»£ç å®¡æŸ¥æ—¶é—´å‡å°‘ 50%

---

## å·¥å…·å’Œèµ„æº / Tools and Resources

### å¿…éœ€å·¥å…· / Required Tools

- **Node.js**: 18.x
- **Yarn**: æœ€æ–°ç‰ˆæœ¬
- **VSCode**: æœ€æ–°ç‰ˆæœ¬
- **Git**: 2.x+

### æ¨è VSCode æ‰©å±• / Recommended VSCode Extensions

å‚è§ `.vscode/extensions.json`

### å­¦ä¹ èµ„æº / Learning Resources

#### TypeScript
- [TypeScript å®˜æ–¹æ–‡æ¡£](https://www.typescriptlang.org/docs/)
- [TypeScript Deep Dive](https://basarat.gitbook.io/typescript/)

#### ESLint & Prettier
- [ESLint è§„åˆ™](https://eslint.org/docs/rules/)
- [Prettier é…ç½®](https://prettier.io/docs/en/options.html)

#### GitHub Copilot
- [Copilot æ–‡æ¡£](https://docs.github.com/en/copilot)
- [æœ€ä½³å®è·µ](https://github.blog/2023-06-20-how-to-write-better-prompts-for-github-copilot/)

#### é¡¹ç›®æ–‡æ¡£
- [ARCHITECTURE.md](./ARCHITECTURE.md)
- [CONTRIBUTING.md](./CONTRIBUTING.md)
- [DEVELOPMENT.md](./DEVELOPMENT.md)

---

## æ²Ÿé€šè®¡åˆ’ / Communication Plan

### å¯åŠ¨ä¼šè®® / Kickoff Meeting

**æ—¶é—´**: ä¼˜åŒ–å¼€å§‹å‰
**å‚ä¸è€…**: å…¨ä½“å¼€å‘å›¢é˜Ÿ
**è®®ç¨‹**:
- ä»‹ç»ä¼˜åŒ–èƒŒæ™¯å’Œç›®æ ‡
- è®²è§£æ–°å·¥å…·å’Œæµç¨‹
- å›ç­”é—®é¢˜å’Œé¡¾è™‘
- åˆ†é…èŒè´£

### æ¯æ—¥åŒæ­¥ / Daily Sync

**æ—¶é—´**: æ¯å¤© 15 åˆ†é’Ÿ
**æ ¼å¼**: Stand-up
**å†…å®¹**:
- æ˜¨å¤©å®Œæˆçš„å·¥ä½œ
- ä»Šå¤©çš„è®¡åˆ’
- é‡åˆ°çš„éšœç¢

### æ¯å‘¨å›é¡¾ / Weekly Review

**æ—¶é—´**: æ¯å‘¨äº”
**å‚ä¸è€…**: å›¢é˜Ÿè´Ÿè´£äºº
**å†…å®¹**:
- å›é¡¾æœ¬å‘¨è¿›å±•
- è¯„ä¼°æŒ‡æ ‡
- è°ƒæ•´è®¡åˆ’ï¼ˆå¦‚éœ€è¦ï¼‰
- è§„åˆ’ä¸‹å‘¨å·¥ä½œ

### é—®é¢˜å‡çº§ / Issue Escalation

- **çº§åˆ« 1**: å¼€å‘è€…è‡ªè¡Œè§£å†³ï¼ˆé¢„æœŸ < 1 å°æ—¶ï¼‰
- **çº§åˆ« 2**: è¯·æ±‚å›¢é˜Ÿå¸®åŠ©ï¼ˆé¢„æœŸ < 4 å°æ—¶ï¼‰
- **çº§åˆ« 3**: å‡çº§ç»™æŠ€æœ¯è´Ÿè´£äººï¼ˆé¢„æœŸ < 1 å¤©ï¼‰
- **çº§åˆ« 4**: å‡çº§ç»™æ¶æ„å¸ˆï¼ˆä¸¥é‡é—®é¢˜ï¼‰

---

## å¸¸è§é—®é¢˜ / FAQ

### Q1: ä¸ºä»€ä¹ˆè¦å¯ç”¨ TypeScript ä¸¥æ ¼æ¨¡å¼ï¼Ÿ

**A**: ä¸¥æ ¼æ¨¡å¼æä¾›æ›´å¥½çš„ç±»å‹å®‰å…¨ï¼Œå¸®åŠ©ï¼š
- åœ¨ç¼–è¯‘æ—¶å‘ç°æ½œåœ¨é”™è¯¯
- æ”¹å–„ IDE æ™ºèƒ½æç¤º
- æé«˜ AI è¾…åŠ©å‡†ç¡®æ€§
- å‡å°‘è¿è¡Œæ—¶é”™è¯¯

### Q2: ç°æœ‰ä»£ç ä¼šç«‹å³å¤±è´¥å—ï¼Ÿ

**A**: ä¸ä¼šã€‚æˆ‘ä»¬é‡‡ç”¨æ¸è¿›å¼è¿ç§»ç­–ç•¥ï¼Œæ¯æ¬¡åªè¿ç§»ä¸€ä¸ªåŒ…ï¼Œç¡®ä¿ç¨³å®šæ€§ã€‚

### Q3: æˆ‘éœ€è¦é‡æ–°å­¦ä¹ å¾ˆå¤šä¸œè¥¿å—ï¼Ÿ

**A**: ä¸éœ€è¦ã€‚å¤§å¤šæ•°æ”¹å˜æ˜¯è‡ªåŠ¨åŒ–çš„ï¼ˆå¦‚æ ¼å¼åŒ–ï¼‰ã€‚æˆ‘ä»¬æä¾›åŸ¹è®­å’Œæ–‡æ¡£æ”¯æŒã€‚

### Q4: å¦‚æœé‡åˆ°é—®é¢˜æ€ä¹ˆåŠï¼Ÿ

**A**: 
1. æŸ¥çœ‹æ–‡æ¡£å’Œ FAQ
2. åœ¨å›¢é˜Ÿé¢‘é“æé—®
3. è”ç³»æŠ€æœ¯è´Ÿè´£äºº
4. å¦‚æœä¸¥é‡ï¼Œæˆ‘ä»¬æœ‰å›æ»šè®¡åˆ’

### Q5: è¿™ä¼šå½±å“é¡¹ç›®è¿›åº¦å—ï¼Ÿ

**A**: çŸ­æœŸå¯èƒ½ä¼šæœ‰è½»å¾®å½±å“ï¼ˆ1-2 å‘¨ï¼‰ï¼Œä½†é•¿æœŸä¼šæ˜¾è‘—æå‡æ•ˆç‡ã€‚æˆ‘ä»¬ä¼šæ ¹æ®å®é™…æƒ…å†µè°ƒæ•´è¿›åº¦ã€‚

---

## æ£€æŸ¥æ¸…å• / Checklist

åœ¨å¼€å§‹è¿ç§»æ¯ä¸ªåŒ…ä¹‹å‰ï¼Œç¡®ä¿ï¼š

- [ ] å·²é˜…è¯» ARCHITECTURE.md
- [ ] å·²é˜…è¯» CONTRIBUTING.md
- [ ] å·²å®‰è£…æ¨èçš„ VSCode æ‰©å±•
- [ ] å·²ç†è§£æ–°çš„å¼€å‘å·¥ä½œæµ
- [ ] å·²åˆ›å»ºå¤‡ä»½åˆ†æ”¯æˆ–æ ‡ç­¾
- [ ] å·²é€šçŸ¥ç›¸å…³å›¢é˜Ÿæˆå‘˜

åœ¨å®Œæˆæ¯ä¸ªåŒ…çš„è¿ç§»åï¼Œç¡®ä¿ï¼š

- [ ] ç±»å‹æ£€æŸ¥é€šè¿‡ï¼ˆ`yarn type-check`ï¼‰
- [ ] Lint æ£€æŸ¥é€šè¿‡ï¼ˆ`yarn lint`ï¼‰
- [ ] ä»£ç å·²æ ¼å¼åŒ–ï¼ˆ`yarn format`ï¼‰
- [ ] æ„å»ºæˆåŠŸï¼ˆ`yarn build`ï¼‰
- [ ] åŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] ä»£ç å·²æäº¤å¹¶åˆ›å»º PR
- [ ] PR å·²é€šè¿‡å®¡æŸ¥

---

## æ”¯æŒå’Œå¸®åŠ© / Support and Help

**æŠ€æœ¯é—®é¢˜**: åœ¨å›¢é˜Ÿ Slack/Teams é¢‘é“æé—®
**æ–‡æ¡£é—®é¢˜**: æäº¤ GitHub Issue
**ç´§æ€¥é—®é¢˜**: è”ç³»æŠ€æœ¯è´Ÿè´£äºº

---

**æœ€åæ›´æ–°**: 2026-01-12
**ç‰ˆæœ¬**: 1.0.0
